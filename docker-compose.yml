version: '3.8'

services:
  sniper:
    build: .
    container_name: base_sniper_bot
    restart: unless-stopped  # 如果程序崩溃或重启服务器，自动重启
    network_mode: "host"
    volumes:
      # 1. 挂载配置文件 (本地改了重启容器即生效)
      - ./.env:/app/.env
      # 2. 挂载数据文件 (确保 shadow 模式的数据写在宿主机上，不会丢失)
      - ./shadow_trades.jsonl:/app/shadow_trades.jsonl
    environment:
      # 可以在这里覆盖环境变量，例如日志级别
      - RUST_LOG=info
    # 限制日志文件大小，防止撑爆服务器硬盘
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"